<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">

    <title>Chat Client</title>
</head>

<body>
    <div class="container text-center">
        <h3 id="status" class="alert alert-success mt-3 d-none">Connection Established!</h3>
        <h3 id="room" class="mt-3"></h3>

        <div class="btn-group mt-3">
            <button id="btnJoin1" class="btn btn-outline-success">Join Room 1</button>
            <button id="btnJoin2" class="btn btn-outline-success">Join Room 2</button>
        </div>

        <form class="input-group mt-3" id="formMessage">
            <input type="text" id="message" class="form-control">
            <button type="submit" class="btn btn-success">Send</button>
        </form>

        <h3 class="mt-3">Received Messages</h3>
        <ul id="receivedMessageList" class="text-start"></ul>
    </div>

    <script>
        const socket = new WebSocket("ws://localhost:8080");

        const room = document.getElementById("room");
        const status = document.getElementById("status");
        const btnJoin1 = document.getElementById("btnJoin1");
        const btnJoin2 = document.getElementById("btnJoin2");
        const formMessage = document.getElementById("formMessage");
        const messageInput = document.getElementById("message");
        const receivedMessageList = document.getElementById("receivedMessageList");

        formMessage.onsubmit = (e) => {
            e.preventDefault();

            if (messageInput.value === "") return;

            const message = messageInput.value;
            socket.send(message);
            messageInput.value = "";
        };

        btnJoin1.onclick = () => {
            socket.send("COMMAND: JOIN 1");
            room.textContent = "In Room 1";
        };

        btnJoin2.onclick = () => {
            socket.send("COMMAND: JOIN 2");
            room.textContent = "In Room 2";
        };

        // Connection established.
        socket.onopen = () => status.classList.remove("d-none");

        // Listen for incoming messages.
        socket.onmessage = (e) => receivedMessageList.innerHTML += `<li>${e.data}</li>`;
    </script>
</body>

</html>